### UC-C01: 회원가입

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-C01 |
| **유스케이스명** | 회원가입 |
| 사용자 | 고객 |
| **개요** | 신규 고객이 동네마켓 서비스에 가입한다 |
| **사전조건** | 고객이 앱/웹에 접속한 상태 |
| **사후조건** | 회원 정보가 저장되고 서비스 이용이 가능해짐 |

**기본 흐름:**

1. 고객이 로그인 버튼을 클릭한다.
2. 고객이 지금 가입하기 버튼을 클릭한다.
3. 시스템이 가입 양식을 표시한다.
4. 고객이 이름, 이메일, 비밀번호, *핸드폰 번호*를 입력한다.
5. 고객이 약관/개인정보 수집 동의 항목을 확인하고 동의한다.
6. *고객이 휴대폰 인증을 요청한다.*
7. *시스템이 인증번호를 발송한다.*
8. *고객이 인증번호를 입력한다.*
9. *시스템이 인증을 확인하고 회원 정보를 저장한다.*
10. *시스템이 가입 완료 메시지를 표시한다*
11. 메인 화면으로 이동한다.

**대안/예외 흐름:**
- 4a. 이미 가입된 이메일인 경우
- 시스템이 중복 이메일 오류를 표시한다.
- 고객이 다른 이메일을 입력한다.

4b. 이미 가입된 휴대폰 번호인 경우

- 시스템이 중복 휴대폰 번호 오류를 표시한다.

- 고객이 다른 번호를 입력한다.

4c. 입력값 형식 오류(이메일/전화번호/비밀번호)인 경우

- 시스템이 형식 오류 메시지를 표시한다.

- 고객이 형식에 맞게 재입력한다.

- 4d. 소셜 로그인으로 가입하는 경우
- 고객이 카카오/네이버 로그인을 선택한다.
- 외부 인증 후 추가 정보(휴대폰 등)를 입력한다.

- 8e.핸드폰 인증번호 만료인 경우

-시스템이 만료 안내를 표시한다.

-고객이 재발송을 요청한다.

**비즈니스 규칙:**
- BR-U01: 이메일과 휴대폰 번호는 시스템 전체에서 유일해야 함

-비밀번호는 영문/숫자/특수문자만 허용하며 8자 이상이어야 함

- 인증번호 유효시간과 재발송 제한 횟수를 적용 (유효시간 3분 / 5번)

- 필수 약관 미동의 시 회원가입 불가

---

### UC-C02: 로그인

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-C02 |
| **유스케이스명** | 로그인 / JWT |
| **액터** | 고객, 마트 |
| **개요** | 사용자가 시스템에 로그인한다 |
| **사전조건** | 가입된 회원 |
| **사후조건** | 인증 토큰이 발급되고 서비스 이용 가능 |

**기본 흐름:**

1. 사용자가 로그인 화면에서 이메일과 비밀번호를 입력한다.
2. 시스템이 자격 증명을 확인한다.
3. 시스템이 JWT 토큰을 발급한다.
4. 시스템이 사용자 역할에 맞는 화면을 표시한다.

**대안 흐름:**
- 2a. 잘못된 자격 증명인 경우
- 시스템이 오류 메시지를 표시한다.

- 1a. 소셜 로그인을 선택한 경우
- 외부 OAuth 인증을 수행한다.
- 연동된 계정 정보로 로그인한다.

**비즈니스 규칙:**

-세션 만료 시간 및 재로그인 조건을 정의한다.

---

### UC-C03: 주변 마트 검색

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-C03 |
| **유스케이스명** | 주변 마트 검색 |
| **액터** | 고객 |
| **개요** | 고객이 현재 위치 기반으로 주변 배달 가능 마트를 검색한다 |
| **사전조건** | 고객이 로그인하고 위치 권한을 허용한 상태 |
| **사후조건** | 배달 가능한 마트 목록이 표시됨 |

**기본 흐름:**

1. 시스템이 고객의 기본 배송지 확인한다.
2. 시스템이 고객이 등록한 현재 설정되어 있는 배송지의 3km 내 마트를 보여준다 
3. 고객이 원하는 마트를 검색한다.
4. 시스템이 배달 반경 3k내 영업 중인 마트를 조회한다.
5. 시스템이 거리순으로 정렬된 마트 목록을 표시한다.
6. 각 마트의 이름, 평점가 표시된다.

**대안 흐름:**

*-기본 배송지 1개는 삭제할 수 없다.*

- 4a. 필터를 적용하는 경우
- 고객이 주문 많은 순, 거리순, 평점  필터를 선택한다.
- 시스템이 필터 조건에 맞는 마트를 표시한다.

-4b.배달 가능 마트 0건인 경우

-시스템이 대체 메시지를 표시한다. 

-시스템이 “현재 배달 가능 마트가 없습니다.” 메시지를 표시한다.

**비즈니스 규칙:**
- BR-S02: 배달 가능 반경은 최대 3km

---

### UC-C04: 상품 검색

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-C04 |
| **유스케이스명** | 상품 검색 - elasticsearch |
| **액터** | 고객 |
| **개요** | 고객이 원하는 상품을 검색한다 |
| **사전조건** | 고객이 앱에 접속한 상태 |
| **사후조건** | 검색 조건에 맞는 상품 목록이 표시됨 |

기본 검색 흐름 :

1. 고객이 검색창에 키워드를 입력한다.
2. 고객이 검색어를 작성 후 엔터를 누른다.
3. 시스템이 배달 가능 마트의 상품 중 검색어와 일치하는 상점을 조회한다.
4. 시스템이 상점 목록을 표시한다.

**기본 흐름:**

1. 고객이 검색창에 키워드를 입력한다.
2. 고객이 검색을 실행한다.
3. 시스템이 배달 가능 마트의 상품 중 키워드와 일치하는 상품을 조회한다.
4. 시스템이 상점 목록을 표시한다 ( 마트명, 이미지).

**대안 흐름:**
- 4a. 검색 결과가 없는 경우
- 시스템이 “검색 결과가 없습니다” 메시지를 표시한다.

- 5a. 카테고리로 탐색하는 경우
- 고객이 카테고리를 선택한다.
- 해당 카테고리의 상점이 표시된다.

**비즈니스 규칙:**

-검색어 길이 제한을 정의한다. (2자 이상 8자 이하)

---

### UC-C05: 장바구니 관리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-C05 |
| **유스케이스명** | 장바구니 관리 |
| **액터** | 고객 |
| **개요** | 고객이 장바구니에 상품을 추가/수정/삭제한다 |
| **사전조건** | 고객이 로그인한 상태 |
| **사후조건** | 장바구니 정보가 업데이트됨 |

**기본 흐름:**

1. 고객이 상품 상세 페이지에서 “장바구니 담기”를 클릭한다.
2. 시스템이 수량 선택 UI를 표시한다.
3. 고객이 수량을 선택하고 확인한다.
4. 시스템이 장바구니에 상품을 추가한다.
5. 시스템이 장바구니 아이콘에 수량을 표시한다.
6. 고객은 장바구니에서 수량을 변경할 수 있다.
7. 고객은 장바구니에서 상품을 삭제할 수 있다.

**대안 흐름:**
- 4a. 재고가 부족한 경우

- 재고가 5개 밑으로 떨어지면 시스템이 수량과 함께  품절 임박 상태를 알린다.

***4c.품절 및 판매중지된 경우***

***-시스템이 품절 알림을 표시하고 담기를 제한한다.***

---

### UC-C06: 주문하기

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-C06 |
| **유스케이스명** | 주문하기 |
| **액터** | 고객, PG사 |
| **개요** | 고객이 장바구니 상품을 주문하고 결제한다 |
| **사전조건** | 장바구니에 상품이 있고, 고객이 로그인한 상태 |
| **사후조건** | 주문이 생성되고 결제가 완료됨 |

**기본 흐름:**

1. 고객이 장바구니에서 “결제하기”를 클릭한다.(결제 페이지로 이동하는 흐름)
2. 고객이 배송 요청사항을 입력한다.
3. 고객이 결제 수단을 선택한다.
4. 시스템이 최종 결제 금액을 계산하여 표시한다.
5. 고객이 결제하기 버튼을 클릭한다.
6. 시스템이 주문 전 재고 및 가격을 재검증한다.
7. 시스템이 주문서 화면을 표시한다.
8. PG사가 결제를 처리한다.
9. 시스템이 주문을 생성하고 마트에 알림을 발송한다.
10. 시스템이 “결제 완료되었습니다.” 팝업창을 띄운다.
11. 영수증 및 결제내역을 확인할 수 있다.

**대안 흐름:**
- 10a. 결제 실패인 경우
- 시스템이 결제 실패 메시지를 표시한다.
- 고객이 다른 결제 수단을 선택한다.

-10b. 결제 승인 지연/타임아웃

-시트템이 결제 상태 확인 안내를 표시한다.

고객이 결제 상태를 재확인한다.

구독 주문인 경우 / 페이지 생성
- 고객이 배송 희망 시간를 선택한다. ex) 9~12 , 12~15, 15~18

**비즈니스 규칙:**
- BR-O03: 최종 결제 금액 = 상품총액 + 배달비 -( 할인 - 포인트)
- ~~BR-O04: 예약 주문은 최소 2시간 후 ~ 최대 7일 이내 설정 가능 <협의 필요>~~
- BR-P02: 포인트 적립은 결제 금액의 1% <협의 필요> → 확장 기능

-~~최소 주문 금액 및 배달비 정책을 정의한다.~~

-결제 수단별 수수료 정책을 정의한다.

---

### UC-C07: 주문 취소

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-C07 |
| **유스케이스명** | 주문 취소 |
| **액터** | 고객, PG사 |
| **개요** | 고객이 주문을 취소한다 |
| **사전조건** | 주문이 마트 접수(ACCEPTED) 전 상태 |
| **사후조건** | 주문이 취소되고 결제가 환불됨 |

**기본 흐름:**

1. 고객이 주문 내역에서 취소할 주문을 확인한다.
2. 고객이 해당 상품의 “주문 취소” 버튼을 클릭한다.
3. 시스템이 취소 사유 선택을 요청한다.
4. 고객이 취소 사유를 선택한다.
5. 시스템이 취소 가능 여부를 확인한다. (검증)
6. 시스템이 PG사에 환불을 요청한다.
7. PG사가 환불을 처리한다.
8. 시스템이 주문 상태를 CANCELLED로 변경한다.

**비즈니스 규칙:**
- BR-O01: 주문 취소는 마트 접수(ACCEPTED) 전까지만 가능
- BR-P01: 결제 취소는 배송 시작 전까지만 전액 취소 가능

---

- **[UC-C08] 배달추적**
    
    ### UC-C08 배달추적
    
    | 항목 | 내용 |
    | --- | --- |
    | **유스케이스 ID** | UC-C08 |
    | **유스케이스명** | 배달추적 |
    | 사용자 | 고객 |
    | **개요** | 고객이 결제 완료한 주문의 배달 진행 상태를 실시간 또는 단계별로 확인한다. |
    | **사전조건** | 1) 고객이 로그인 상태이다.
    2) 주문이 결제 완료 상태이다.
    3) 주문이 배달 대상 주문이다. |
    | **사후조건** | 고객은 배달 진행 상태를 확인하거나, 배달 완료 여부를 인지한다. |
    
    **기본 흐름:**
    
    1. 고객이 화면 오른쪽 하단의 배달 추적 아이콘을 선택한다.
    2. 시스템은 고객의 최근 배달 주문 목록을 조회한다.
    3. 고객이 조회할 주문을 선택한다.
    4. 시스템은 해당 주문의 배달 상태를 표시한다.
        1. 주문 접수
        2. 상품 준비 중
        3. 픽업 대기
        4. 배송 중
        5. 배송 완료
    5. 배달 상태가 배송 중인 경우 시스템은 현재 배달원의 위치를 지도에 나타낸다
    6. 고객은 현재 배달 단계와 예상 도착 시간을 확인한다.
    
    배송 현황 → 배송 완료된 주문에 한해서 배달원이 보낸 사진을 볼 수 있어야한다.
    
    **대안/예외 흐름:**
    
    A1. 배달 주문이 존재하지 않는 경우: 시스템은 “진행 중인 배달 주문이 없습니다.” 메시지를 표시한다.
    
    A2. 배달이 아직 시작되지 않은 경우: 시스템은 “상품 준비 중” 상태만 표시하고 실시간 위치 정보는 제공하지 않는다.
    
    A3. 배달이 완료된 경우:  
    시스템은 배달 완료 상태를 표시한다. 
    배달 추적 아이콘에서는 더 이상 해당 주문을 노출하지 않는다. 
    고객은 **마이페이지 → 주문/리뷰 관리**에서 배송 결과를 확인할 수 있다.
    
    **비즈니스 규칙:**
    -**BR-C08-01**: 배달 추적은 결제 완료 상태의 주문에 대해서만 가능하다.
    
    -**BR-C08-02**: 배달 상태는 주문 상태 변경 이벤트에 따라 단계적으로 갱신된다.
    
    -**BR-C08-03**: 배달원의 실시간 위치 정보는 배송 중 상태에서만 제공할 수 있다.
    
    -**BR-C08-04**:  배달 완료 이후에는 실시간 추적 정보는 제공하지 않는다.
    
    -**BR-C08-05**: 고객은 본인의 주문에 대해서만 배달 추적을 할 수 있다.
    
- **[UC-C09] 리뷰작성**
    
    ### **[UC-C09] 리뷰작성**
    
    | 항목 | 내용 |
    | --- | --- |
    | **유스케이스 ID** | UC-C09 |
    | **유스케이스명** | 리뷰작성 |
    | 사용자 | 고객 |
    | **개요** | 고객이 배달 완료된 주문에 대해 상품 및 배송에 대한 리뷰를 작성한다. |
    | **사전조건** | 1) 고객은 로그인 상태이다.
    2) 주문은 배달 완료 상태이다.
    3) 해당 주문에 대한 리뷰가 아직 
    작성되지 않았다. |
    | **사후조건** | 고객의 리뷰가 저장되며, 해당 주문 내역에서 내가 쓴 리뷰를 볼 수 있다. |
    
    ### 기본 흐름
    
    1. 고객이 마이페이지에 진입한다.
    2. 고객이 주문/리뷰 관리 메뉴를 선택한다.
    3. 고객이 리뷰쓰기 버튼을 클릭한다.
    4. 별점을 선택하고 해당 주문에 대한 리뷰 내용을 작성한다.
    5. 리뷰 등록 버튼을 클릭한다.
    6. 시스템은 해당 리뷰를 저장한다.
    7. 시스템은 리뷰 작성 완료 메시지를 표시한다.
    
    ### 대안 / 예외 흐름
    
    **A1. 이미 리뷰가 작성된 주문인 경우**
    
    - 시스템은 고객이 작성한 리뷰를 보여준다.
    
    **E1. 필수 입력 항목이 누락된 경우**
    
    - 고객이 별점 또는 리뷰 내용을 입력하지 않은 경우
        
        → 시스템은 입력 누락 안내 메시지를 표시하고 저장을 제한한다.
        
    
    ### 비즈니스 규칙
    
    - **BR-R01**: 배송완료 후 7일 이내 작성,수정,삭제 가능
    - **BR-C09-01:** 리뷰 작성은 배송 완료 상태의 주문에 대해서만 가능하다.
    - **BR-C09-02:** 하나의 주문에 대해 하나의 리뷰만 작성할 수 있다.
    - **BR-C09-03:** 리뷰 작성 완료 후에는 수정, 삭제가 가능하다(내가 쓴 리뷰에서도 조작이 가능함)
    - **BR-C09-04:** 리뷰에는 욕설, 비속어 등 정책 위반 내용이 포함될 수 없다.
    - **BR-C09-05:** 고객은 본인이 주문한 상품에 대해서만 리뷰를 작성할 수 있다.
- **[UC-C10] 구독관리**
    
    ### [UC-C10] 구독관리
    
    | 항목 | 내용 |
    | --- | --- |
    | **유스케이스 ID** | UC-C10 |
    | **유스케이스명** | 구독관리 |
    | 사용자 | 고객 |
    | **개요** | 고객이 구독 중인 서비스(또는 가게/상품)에 대해 구독 상태를 조회하고, 해지 또는 갱신을 관리한다. |
    | **사전조건** | 1) 고객은 로그인 상태이다.2) 고객은 하나 이상의 구독 이력을 보유하고 있다. |
    | **사후조건** | 고객의 구독 상태가 변경되거나, 기존 구독 정보가 유지된다. |
    
    ### 기본 흐름
    
    1. 고객이 마이페이지에 진입한다.
    2. 고객이 **구독 관리** 메뉴를 선택한다.
    3. 시스템은 고객의 구독 목록을 조회한다.
    4. 시스템은 구독의 상세 정보를 표시한다.
        - 구독 상품
        - 구독 상태( 구독 중 / 해지 예정 / 해지 완료)
        - 다음 결제 예정일
    5. 고객이 구독 관리 옵션을 선택한다.
        - 구독 해지
    6. 시스템은 고객이 선택한 요청을 처리한다.
    7. 시스템은 구독 상태를 반영하고 처리 결과를 표시한다.
    
    ### 대안 / 예외 흐름
    
    **A1. 구독 중인 항목이 없는 경우**
    
    - 시스템은 구독 관리 화면에서 “현재 구독 중인 항목이 없습니다.” 메시지를 표시한다.
    
    **A2. 이미 해지된 구독인 경우**
    
    - 구독 관리 메뉴에서 조회되지 않는다.
    
    **A3. 해지 예정 요청을 취소하는 경우**
    
    - 고객이 해지 예정 요청 확인 단계에서 취소를 선택한 경우
        
        → 시스템은 기존 구독 상태를 유지한다.
        
    
    **A4. 구독중인 상태에서 구독 해지하기 눌렀을 때 남은 배송건 이 있는 경우**
    
    - 시스템은 남은 배송, 결제 종료일을 안내하고 구독 상태를 해지 예정으로 변경한다.
    
    ### 비즈니스 규칙
    
    - **BR-C10-01:** 구독 관리는 로그인한 고객 본인의 구독에 대해서만 가능하다.
    - **BR-C10-02:** 구독 해지는 다음 결제일 기준 해지 정책을 따른다.
    - **BR-C10-05:** 구독 상태 변경 이력은 시스템에 기록되어야 한다.
- **[UC-C11] 회원 탈퇴**
    
    ### [UC-C11] 회원 탈퇴
    
    | 항목 | 내용 |
    | --- | --- |
    | **유스케이스 ID** | UC-C11 |
    | **유스케이스명** | 회원탈퇴 |
    | 사용자 | 고객 |
    | **개요** | 고객이 서비스 이용을 중단하기 위해 회원 탈퇴를 요청한다. |
    | **사전조건** | 1) 고객은 로그인 상태이다. |
    | **사후조건** | 회원 계정이 탈퇴 처리되며, 서비스 이용이 제한된다. |
    
    ### 기본 흐름
    
    1. 고객이 마이페이지에 진입한다.
    2. 고객이 내 정보 관리를 선택한다.
    3. 고객이 **회원 탈퇴**를 선택한다.
    4. 시스템은 회원 탈퇴 안내 사항을 표시한다.
    5. 고객이 회원 탈퇴를 확정한다.
    6. 시스템은 회원 탈퇴 처리를 수행한다.
    7. 시스템은 탈퇴 완료 메시지를 표시하고 고객을 로그아웃 처리한다.
    
    ### 대안 / 예외 흐름
    
    **A1. 탈퇴를 취소하는 경우**
    
    - 고객이 탈퇴 확인 단계에서 취소를 선택한 경우
        
        → 시스템은 회원 탈퇴를 수행하지 않고 이전 화면으로 이동한다.
        
    
    **A2. 진행 중인 구독 또는 이용 중인 서비스가 있는 경우**
    
    - 고객에게 탈퇴 제한 사유를 안내한다.
    - 시스템은 회원 탈퇴 처리를 제한한다.
    
    ### 비즈니스 규칙
    
    - **BR-C11-01:** 진행 중인 구독, 결제 예정 내역, 이용 중인 서비스가 있는 경우 회원 탈퇴는 제한될 수 있다.
    - **BR-C11-02:** 회원 탈퇴 시 계정은 즉시 이용 불가 상태로 변경된다.
    - **BR-C11-03:** 탈퇴한 회원의 개인정보 처리 및 보관은 관련 법령 및 내부 정책에 따른다.
- **[UC-C12] 배송지 관리**
    
    ### UC-C12] 배송지 관리
    
    | 항목 | 내용 |
    | --- | --- |
    | **유스케이스 ID** | UC-C12 |
    | **유스케이스명** | 배송지 관리 |
    | 사용자 | 고객 |
    | **개요** | 고객이 상품 배송을 위해 배송지를 등록, 수정, 삭제 및 기본 배송지로 관리한다. |
    | **사전조건** | 1) 고객은 로그인 상태이다. |
    | **사후조건** | 배송지 정보가 등록·수정·삭제되거나, 기본 배송지가 변경된다. |
    
    ### 기본 흐름
    
    1. 고객이 마이페이지에 진입한다.
    2. 고객이 **배송지 관리** 메뉴를 선택한다.
    3. 시스템은 고객의 배송지 목록을 조회한다.
    4. 고객이 배송지 관리 옵션을 선택한다.
        - 배송지 등록
        - 배송지 수정
        - 배송지 삭제
    5. 고객이 배송지 정보를 입력하거나 수정한다.
        - 배송지 별칭
        - 연락처
        - 배송 주소
        - 기본 배송지로 설정
    6. 고객이 저장하기 버튼을 클릭한다.
    7. 시스템은 배송지 정보를 저장하고 처리 결과를 표시한다.
    
    ### 대안 / 예외 흐름
    
    **E2. 기본 배송지 설정 규칙 위반**
    
    - 기본 배송지가 이미 존재하는 상태에서 중복 설정이 발생한 경우
        
        → 시스템은 기존 기본 배송지를 해제한 후 새 기본 배송지를 적용한다.
        
    
    **E3. 배송지 별칭이 이미 등록되어 있는 경우**
    
    - 고객이 입력한 배송지 별칭이 기존 배송지와 중복되는 경우
        
        → 시스템은 “이미 사용 중인 배송지 별칭입니다.” 메시지를 표시한다.
        
        → 시스템은 저장을 제한하고 별칭 수정을 요청한다.
        
    
    **E4. 동일한 배송지 주소가 이미 등록되어있는 경우**
    
    - 고객이 입력한 배송지 주소가 기존 배송지와 동일한 경우
        
        → 시스템은 중복 등록 안내 메시지를 표시한다.
        
    
    ### 비즈니스 규칙
    
    - **BR-C12-01:** 배송지는 로그인한 고객 본인에 대해서만 관리할 수 있다.
    - **BR-C12-02:** 기본 배송지는 하나만 설정할 수 있다.
    - **BR-C12-04:** 배송지 정보 변경은 신규 주문에만 적용된다.
    - **BR-C12-05:** 배송지 최대 등록 개수(5개)는 서비스 정책에 따라 제한될 수 있다.
    - **BR-C12-06**: 배송지 별칭은 고객 기준으로 중복될 수 없다.
        - 유니크 제약조건(고객아이디 + 배송지 별칭)
    - **BR-C12-07:** 동일한 배송지 주소는 중복 등록이 제한될 수 있다.
- **[UC-C13] 결제 수단 관리**
    
    ### **[UC-C13] 결제 수단 관리**
    
    | 항목 | 내용 |
    | --- | --- |
    | **유스케이스 ID** | UC-C13 |
    | **유스케이스명** | **결제 수단 관리** |
    | 사용자 | 고객 |
    | **개요** | 고객이 상품 결제를 위해 결제 수단을 등록, 삭제 및 기본 결제 수단으로 관리한다. |
    | **사전조건** | 1) 고객은 로그인 상태이다. |
    | **사후조건** | 결제 수단 정보가 등록·삭제되거나, 기본 결제 수단이 변경된다. |
    
    ## 기본 흐름
    
    1. 고객이 마이페이지에 진입한다.
    2. 고객이 **결제 수단 관리** 메뉴를 선택한다.
    3. 시스템은 고객의 결제 수단 목록을 조회한다.
    4. 고객이 결제 수단 관리 옵션을 선택한다.
        - 결제 수단 등록
        - 결제 수단 삭제
    5. 고객이 결제 수단 정보를 입력한다.
        - 기본 결제 수단으로 설정
    6. 고객이 저장하기 버튼을 클릭한다.
    7. 시스템은 결제 수단 정보를 저장하고 처리 결과를 표시한다.
    
    ### 대안 / 예외 흐름
    
    **E2. 기본 결제 수단 설정 규칙 위반**
    
    - 고객이 결제 수단을 기본 결제 수단으로 설정한다.
    - 이미 기본 결제 수단이 존재하는 경우
        
        → 시스템은 기존 기본 결제 수단의 설정을 해제한다.
        
        → 시스템은 새로 선택한 결제 수단을 기본 결제 수단으로 설정한다.
        
    
    **E3. 결제 수단 인증 실패(PG)**
    
    - 고객이 결제 수단 등록을 요청한다.
    - 외부 결제 수단 인증 과정에서 오류가 발생한 경우
        
        → 시스템은 인증 실패 안내 메시지를 표시한다.
        
        → 시스템은 결제 수단 등록을 제한한다.
        
    
    **E4. 동일한 결제 수단이 이미 등록되어 있는 경우(PG 위임)**
    
    - 고객이 결제 수단 등록을 요청한다.
    - 등록하려는 결제 수단이 기존에 등록된 결제 수단과 동일한 경우
    
    → 시스템은 중복 등록 안내 메시지를 표시한다.
    
    ### 비즈니스 규칙
    
    - **BR-C13-01:** 결제 수단은 로그인한 고객 본인에 대해서만 관리할 수 있다.
    - **BR-C13-02:** 기본 결제 수단은 하나만 설정할 수 있다.
    - **~~BR-C13-03:** 주문 또는 결제 처리 중인 결제 수단은 삭제가 제한될 수 있다.~~
    - **BR-C13-04:** 결제 수단 변경 사항은 신규 주문에만 적용된다.
    - **BR-C13-05:** 결제 수단 최대 등록 개수(5개)는 서비스 정책에 따라 제한될 수 있다.
    - **BR-C13-06:** 동일한 결제 수단은 고객 기준으로 중복 등록될 수 없다.
    - **BR-C13-07:** 민감한 결제 정보는 서비스 정책에 따라 안전하게 처리되어야 한다.
- **~~[UC-C14] 쿠폰 조회(추가기능)~~**
    
    ### [UC-C14] 쿠폰 조회
    
    | 항목 | 내용 |
    | --- | --- |
    | **유스케이스 ID** | UC-C14 |
    | **유스케이스명** | 쿠폰 조회 |
    | 사용자 | 고객 |
    | **개요** | 고객이 보유한 쿠폰 목록을 조회하고, 각 쿠폰의 사용 가능 여부 및 상세 정보를 확인한다. |
    | **사전조건** | 1) 고객은 로그인 상태이다. |
    | **사후조건** | 고객은 보유 쿠폰 목록 및 쿠폰별 상태 정보를 확인한다. |
    
    ## 기본 흐름
    
    1. 고객이 마이페이지에 진입한다.
    2. 고객이 쿠폰함 메뉴를 선택한다.
    3. 시스템은 고객이 보유한 쿠폰 목록을 조회한다.
    4. 시스템은 쿠폰 목록을 화면에 표시한다.
        - 쿠폰 명칭
        - 사용 조건
        - 할인 유형 및 할인 금액/비율
        - 사용 가능 여부
        - 유효 기간
    
    ## 대안 / 예외 흐름
    
    **A1. 보유한 쿠폰이 없는 경우**
    
    - 고객이 쿠폰 조회 메뉴를 선택한다.
    - 고객이 보유한 쿠폰이 존재하지 않는 경우
        
        → 시스템은 보유 쿠폰이 없음을 안내하는 메시지를 표시한다.
        
    
    **A2. 사용 조건을 충족하지 않은 쿠폰이 존재하는 경우**
    
    - 고객이 쿠폰 목록을 조회한다.
    - 유효 기간은 남아 있으나 사용 조건을 충족하지 않은 쿠폰이 존재하는 경우
        
        → 시스템은 해당 쿠폰을 사용 불가 상태로 표시한다.
        
    
    ## 비즈니스 규칙
    
    - **BR-C14-01:** 쿠폰은 로그인한 고객 본인에 대해서만 조회할 수 있다.
    - **BR-C14-02:** 쿠폰은 유효 기간 및 사용 조건에 따라 사용 가능 여부가 결정된다.
    - **BR-C14-03:** 이미 사용 완료된 쿠폰은 재사용할 수 없다.
- **[UC-C15] 1:1 문의 작성**
    
    ### [UC-C15] 1:1 문의 작성
    
    | 항목 | 내용 |
    | --- | --- |
    | **유스케이스 ID** | UC-C15 |
    | **유스케이스명** | 1:1 문의 작성 |
    | 사용자 | 고객 |
    | **개요** | 고객이 서비스 이용 중 발생한 문의 사항을 1:1 문의로 작성하여 고객센터에 접수한다. |
    | **사전조건** | 1) 고객은 로그인 상태이다. |
    | **사후조건** | 1:1 문의가 등록되고 접수 결과가 표시된다. |
    
    ## 기본 흐름
    
    1. 고객이 마이페이지에 진입한다.
    2. 고객이 고객 지원 메뉴를 선택한다.
    3. 고객이 1:1 문의 탭을 선택한다.
    4. 시스템은 1:1 문의 작성 화면 및 고객 문의 내역을 표시한다.
    5. 고객이 문의 정보를 입력한다.
        - 문의 유형
            - 주문/결제 문의
            - 취소/환불 문의
            - 배송 문의
            - 서비스 이용 문의
            - 기타
        - 문의 제목
        - 문의 내용
        - 첨부 파일(선택)
    6. 고객이 문의 등록 버튼을 클릭한다.
    7. 시스템은 문의 내용을 저장한다.
    8. 시스템은 문의 접수 완료 메시지를 표시한다.
    
    ## 대안 / 예외 흐름
    
    **E1. 필수 입력 항목이 누락된 경우**
    
    - 고객이 문의 등록을 요청한다.
    - 문의 유형, 제목 또는 문의 내용이 입력되지 않은 경우
        
        → 시스템은 입력 누락 안내 메시지를 표시한다.
        
        → 시스템은 문의 등록을 제한한다.
        
    
    ## 비즈니스 규칙
    
    - **BR-C15-01:** 1:1 문의는 로그인한 고객 본인만 작성할 수 있다.
    - **BR-C15-02:** 문의 유형, 제목, 문의 내용은 필수 입력 항목이다.
    - **BR-C15-03:** 답변이 완료된 1:1 문의는 삭제할 수 없다.
- **[UC-C16] 프로필**
    
    ### **[UC-C16] 프로필 조회**
    
    | 항목 | 내용 |
    | --- | --- |
    | **유스케이스 ID** | UC-C16 |
    | **유스케이스명** | 프로필 조회 |
    | 사용자 | 고객 |
    | **개요** | 고객이 자신의 기본 프로필 정보를 조회한다. |
    | **사전조건** | 1) 고객은 로그인 상태이다. |
    | **사후조건** | 프로필 정보를 확인할 수 있다. |
    
    ## 기본 흐름
    
    1. 고객이 마이페이지에 진입한다.
    2. 고객이 내 정보 **관리** 메뉴를 선택한다.
    3. 시스템은 고객의 프로필 정보를 조회하여 화면에 표시한다.
        - 이름
        - 이메일
        - 연락처
        - 생년월일
        - 가입일
    
    ## 비즈니스 규칙
    
    - **BR-C16-01:** 프로필 정보는 로그인한 고객 본인만 조회 할 수 있다.
    - **BR-C16-03:** 이메일은 프로필 관리 화면에서 수정할 수 없다.

    ---

    ### UC-S01: 마트 등록 신청 ( 화면 수정 필요 - 한성 )

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-S01 |
| **유스케이스명** | 마트 등록 신청 |
| **액터** | 마트 사장님 |
| **개요** | 새로운 마트가 플랫폼에 입점 신청을 한다 |
| **사전조건** | 사장님이 회원가입 완료 |
| **사후조건** | 마트 등록 신청이 접수되고 관리자 승인 대기 |

**기본 흐름:**
1. 사장님이 “상점 입점 신청하기”을 클릭한다
2. 시스템이 등록 양식을 표시한다
3. 사장님이 마트 정보를 입력한다

- 상품 카테고리 선택
- 상호명, 사업자등록번호, 연락처, 대표자 명 등
- 마트 전화 번호(선택 사항)
- 주소 (지도에서 위치 선택)
- 은행명, 계좌번호, 예금주
- 통신 판매업 신고번호
~~~~- 운영 시간 정보
4. 사장님이 증빙용 이미지를 업로드한다 → 사업자등증,통신판매업 신고증,통장사본

5. 사장님이 마트 사진을 업로드한다
6. 사장님이 신청을 제출한다
7. 시스템이 신청 정보를 저장한다 (상태: PENDING)
8. 관리자에게 승인이 되기 전까지 기다린다

**비즈니스 규칙:**
- BR-S01: 사업자등록번호는 시스템 전체에서 유일해야 함 
- BR-U04: 마트 사장님은 관리자 승인 후 활동 가능 
- 이미 신청했으면 신청 버튼이 신청 취소 버튼으로 바뀜

---

### UC-S02: 상품 관리 ( 화면 수정 필요 )

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-S02 |
| **유스케이스명** | 상품 관리 |
| **액터** | 마트 사장님 |
| **개요** | 마트에서 판매할 상품을 등록/수정/삭제한다 |
| **사전조건** | 마트가 승인(APPROVED) 상태 |
| **사후조건** | 상품 정보가 업데이트/등록 됨 |

**기본 흐름 (상품 등록):**
1. 사장님이 “상품 등록”을 클릭한다
2. 시스템이 등록 양식을 표시한다
3. 사장님이 상품 정보를 입력한다
- 상품명, 카테고리, 가격, 재고
- 상품 설명, 원산지
~~~~- 할인율
4. 사장님이 상품 이미지를 업로드한다
5. 사장님이 “등록 완료”를 클릭한다
6. 시스템이 상품을 등록한다

**대안 흐름 (상품 수정):**
- 사장님이 상품 목록에서 수정할 상품을 선택한다
- 정보를 수정하고 저장한다

**대안 흐름 (상품 삭제):**
- 사장님이 상품을 “판매 중지” 처리한다 (Soft Delete)

**비즈니스 규칙:**
- BR-S04: 상품 가격은 0 초과이어야 함

---

### UC-S03: 재고 관리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-S03 |
| **유스케이스명** | 재고 관리 |
| **액터** | 마트 사장님 |
| **개요** | 상품의 재고 수량을 관리한다 |
| **사전조건** | 마트가 승인(APPROVED) 상태,
재고 관리 대상 상품이 등록된 상태 |
| **사후조건** | 재고 정보가 업데이트됨 |

**기본 흐름:**
1. 사장님이 재고 관리를 클릭한다.
2. 사장님이 입고 버튼을 클릭한다.
3. 사장님이 상품의 입고 수량을 입력한다.
4. 시스템이 재고를 업데이트한다
5. 사장님이 품절 임박 수량을 페이지 상단에서 정할 수 있다

**대안 흐름(시템 품절 처리):**
- 재고가 0이 되는 경우
- 시스템이 자동으로 “품절” 표시를 한다
- 사용자는 품절 상품은 주문 불가 하다.

**대안 흐름(수동 품절 처리):**
- 재고 관리에서 재고임박 알림 설정 미만으로 떨어진 상품은 대시보드에 표시된다
- 사장님이 필요에 따라 토글을 눌러 품절 처리 가능하다
- 대시보드에 나오지 않는 상품도 필요에 따라 상품 관리에 들어가 품절 처리 가능하다
- 사용자는 품절 상품은 주문 불가 하다

**비즈니스 규칙:**
- BR-S06: 재고가 0인 상품은 자동으로 품절 처리

---

### UC-S04: 주문 접수

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-S04 |
| **유스케이스명** | 주문 접수 |
| **액터** | 마트 사장님 |
| **개요** | 마트가 신규 주문을 확인하고 접수한다 |
| **사전조건** | 결제 완료(PAID) 상태의 주문이 있음 |
| **사후조건** | 주문이 접수(ACCEPTED)되고 상품 준비 시작 |

**기본 흐름:**
1. 시스템이 새 주문 알림을 마트에 발송한다
2. 사장님이 대시보드 신규 주문 현황에서 새 주문을 확인한다
3. 사장님이 주문 상세 정보를 확인한다
4. 사장님이 재고 확인 후 상품 준비시간을 수정 혹은 확인한 후 “주문 접수”를 클릭한다
  - 사장님은 주문접수 전에 준비시간 설정이 가능하다.
5. 시스템이 주문 상태를 ACCEPTED로 변경한다
6. 시스템이 고객에게 “주문이 접수되었습니다” 알림을 발송한다, 이때 라이더 배차가 시작된다.
7. 사장님이 상품 준비 한 후 준비완료 버튼을 누른다. 누르지 못하면 준비시간(5분 간격 조정 가능) 후 자동으로 주문 완료
8. 라이더가 주문완료 된 상품을 수령하고 수령 후 주문은 주문관리 탭에서 확인 가능

**대안 흐름(수락 제한 시간):**
- 주문 접수를 일정시간 누르지 않으면 자동으로 거절(5분)
- 배차가 완료된 주문은 주문은 주문 완료버튼 앞쪽에 배차완료 알람이 뜸

---

### UC-S05: 주문 거절

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-S05 |
| **유스케이스명** | 주문 거절 |
| **액터** | 마트 사장님 |
| **개요** | 마트가 주문을 거절한다 |
| **사전조건** | 결제 완료(PAID), 주문 접수 전 주문 |
| **사후조건** | 주문이 거절(REJECTED)되고 환불 처리됨 |

**기본 흐름:**
1. 사장님이 주문 상세에서 “주문 거절”을 클릭한다
2. 시스템이 거절 사유 선택을 요청한다
3. 사장님이 사유를 선택/입력한다 (재고 부족, 영업 종료 등)
4. 시스템이 주문 상태를 REJECTED로 변경한다
5. 시스템이 결제 취소(환불)를 처리한다
6. 시스템이 고객에게 거절 알림을 발송한다

---

### UC-S06: 매출 조회 (마트 페이지 - 매출 및 정산 탭 확인)

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-S06 |
| **유스케이스명** | 매출 조회 |
| **액터** | 마트 사장님 |
| **개요** | 마트의 매출 현황과 통계를 조회한다 |
| **사전조건** | 마트가 승인(APPROVED) 상태 |
| **사후조건** | 없음 (조회만) |
|  |  |

**기본 흐름:**
1. 사장님이 “매출 및 정산”을 선택한다
2. 시스템이 대시보드를 표시한다
- 1개월
- 조회 기간 매출/일 평균 매출/ 환불 취소/ 이번 정산 예정금액
- 조회 기간 일 별 매출 추이(금액, 주문 수, 막대 그래프)
- 매출 비중(주문 상품, 구독 상품)
- ~~인기 상품 순위(주문)~~

---

### UC-S08: 정산 확인 (마트 페이지 - 매출 및 정산 탭 확인)

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-S09 |
| **유스케이스명** | 정산 확인 |
| **액터** | 마트 사장님 |
| **개요** | 마트의 정산 내역을 확인한다 |
| **사전조건** | 정산 내역이 존재함 |
| **사후조건** | 없음 (조회만) |

**기본 흐름:**
1. 사장님이 “매출 및 정산”을 선택한다
2. 시스템이 최근 정산내역을 표시한다 (월별)
3. 사장님이 특정 정산 기간을 선택한다
4. 시스템이 상세 내역을 표시한다
- 총 매출, 플랫폼 수수료, 정산 금액
- 포함된 주문 목록

### UC-S09: 영업시간 수정

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-S09 |
| **유스케이스명** | 영업시간 설정 |
| **액터** | 마트 사장님 |
| **개요** | 마트의 요일별 영업시간과 임시휴무를 설정한다 |
| **사전조건** | 마트가 승인(APPROVED) 상태 |
| **사후조건** | 영업시간 정보가 업데이트됨 |

**기본 흐름:**
1. 사장님이 “운영 설정”을 클릭한다
2. 시스템이 영업 시작 시간과 종료 시간을 표시함
3. 사장님이 오픈/마감 시간을 설정한다
4. 사장님이 정기 휴무일을 설정한다
5. 사장님이 운영 설정 완료 버튼을 클릭한다.

 6.  시스템이 변경된 데이터를 저장 후 반영 한다.

**대안 흐름 (배달 불가):**
- 화면 상당에 배달 불가/가능 토글로 운영 상태를 바로 변경 가능 하다.
- 평소에는 기본적인 운영 일정에 따라 배달 상태가 변화한다. 

**비즈니스 규칙:**
- BR-S07: 요일별 영업 시간 설정은 운영시간 중에는 변경 불가하다.

---

### UC-S10: 구독 등록

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-S10 |
| **유스케이스명** | 구독 등록 |
| **액터** | 마트 사장님 |
| **개요** | 구독 상품을 등록한다 |
| **사전조건** | 마트가 승인(APPROVED) 상태 |
| **사후조건** | 구독 상품 정보가 저장됨 |

**기본 흐름:**
1. 사장님이 “구독 관리”를 선택한다
2. 사장님이 구독 상품 정보를 입력한다
 - 구독 상품명
 - 가격
 - 상품 사진
 - 상품 설명
 - 구성 품목
 - 품목 당 구성 갯수
 - 구독 상품 노출 상태(노출, 숨김)
 - 월간, 주간 배송 횟수, 배송 요일 설정
3. 사장님이 “구성 완료”를 클릭한다
4. 시스템이 구독 상품 정보를 저장한다
5. 사용자들의 보는 마트 상세 페이지 구독란에 상품이 추가된다.
6. “구독 관리” 에서 등록한 구독 정보를 확인 가능하다
- 이름/가격/고객/상세/상태(운영)
- 구독 당 구성 상품 총 필요 재고 표시 

---

### UC-S11: 삭제

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-S11 |
| **유스케이스명** | 구독 삭제 |
| **액터** | 마트 사장님 |
| **개요** | 구독 상품을 수정한다 |
| **사전조건** | 구독 상품 정보가 저장된 상태,
구독자가 없는 구독인 상태 |
| **사후조건** | 구독 상품 정보가 삭제됨 |

**기본 흐름:**
1. 사장님이 “구독 관리”를 선택한다
2. 사장님이 구독 상품을  미노출 상태로 변경한다

3. 삭제 요청버튼을 클릭한다
4. 구독자가 존재하지 않으면 삭제되고 구독자가 존재할 시 삭제 예정으로 바뀐다

5. 사장님이 구독중인 고객에게 알림을 발송한다
6. 구독 상품 삭제 유무를 시스템이 재확인한다
7. 구독 상품이 삭제된다.

**대안 흐름 (구독 삭제 불가):**
- 구독자가 존재하는 상태의 구독을 삭제 버튼을 누른다.
- 구독 상품을 삭졔 예정 상태로 바꿀지 유무를 재확인한다
- 구독 상품 폐지에 대한 알람이 기존 구독자들에게 전해진다
- 기존 구독자들은 혜택 기간까지 구독 서비스를 받지만 다음 결제는 되지 않고 해지된다.
- 사장님은 삭제 예정기간 동안 구독자들에게 평와가 같은 서비스를 제공한다.
- 구독자가 존재하지 않는 상태로 바뀐 구독의 “삭제” 버튼을 사장님이 다시 클릭해야 한다

**비즈니스 규칙:**
- 구독 정보 수정은 불가하다. 필요 시 삭제 후 재등록 한다.
- 구독자가 존재하는 구독상품 삭제 시도 시 모든 구독자들의 구독이 해지될때 까지 구독은 삭제 예정 상태가 된다.
- 삭제 예정 상태의 구독은 자동삭제 되지 않으며 사장님이 직접 삭제 절차를 밟아야 한다. 

---

### UC-S12: 구독 상품 배송

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-S12 |
| **유스케이스명** | 구독 상품  |
| **액터** | 마트 사장님 |
| **개요** | 구독 상품 자동 배차 및 조회 |
| **사전조건** | 마트가 승인(APPROVED) 상태,
구독 상품 정보가 저장된 상태,
구독자가 1명 이상인 상태 |
| **사후조건** | 구독 상품 자동 배차, 배차 일정 조회 |

**기본 흐름:**
1. 사장님이 “구독 관리”를 클릭한다
2. 구독 상품은 사용자가 입력한 배송 시간 단위당 배달 정보가 표시된다.(영업 종료 전까지 3시간 단위)
3. 배달 정보는 시간대(3시간단위), 품목, 품목별 갯수 로 이루어져있다.
4. 사장님은 배차시간 전에 미리 상품을 준비 해야 한다.

---

### UC-A01: 마트 승인/거절

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-A01 |
| **유스케이스명** | 마트 승인/거절 |
| **액터** | 관리자 |
| **개요** | 관리자가 마트 등록 신청을 검토하고 승인/거절한다 |
| **사전조건** | PENDING 상태의 마트 신청이 있음 |
| **사후조건** | 마트 상태가 APPROVED 또는 REJECTED로 변경됨 |

**기본 흐름:**

신청 관리 탭 클릭
1. 관리자가 마트 승인 대기 목록을 조회한다
2. 관리자가 특정 마트 신청에 상세보기를 클릭한다
3. 관리자가 제출 서류(사업자등록증 등)를 검토한다 - 이름/상호명을 클릭하면 제출서류를 보여주기
4. 관리자가 “승인”을 클릭한다
5. 시스템이 마트 상태를 APPROVED로 변경한다
6. 알림발송

**대안 흐름:**
- 4a. 서류가 미비한 경우

- 관리자가 “보류”을 선택하고 보류 사유를 입력한다
- 시스템이 마트 신청 상태를 보류 상태로 변경한다
- 시스템이 보류 알림을 발송한다

-4b. 거절할 경우
- 관리자가 “거절”을 선택하고 거절 사유를 입력한다
- 시스템이 마트 신청 상태를 REJECTED로 변경한다
- 시스템이 거절 알림을 발송한다

**비즈니스로직:**

마트 신청 상태: 심사대기 / 보류 / 승인 / 거절

미비 서류 제출 기간은 7일(주말 포함)

---

### UC-A02: 배달원 승인/거절

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-A02 |
| **유스케이스명** | 배달원 승인/거절 |
| **액터** | 관리자 |
| **개요** | 관리자가 배달원 등록 신청을 검토하고 승인/거절한다 |
| **사전조건** | PENDING 상태의 배달원 신청이 있음 |
| **사후조건** | 배달원 상태가 APPROVED 또는 REJECTED로 변경됨 |

**기본 흐름:**
1. 관리자가 배달원 승인 대기 목록을 조회한다
2. 관리자가 특정 배달원 신청을 선택한다
3. 관리자가 신분증 정보를 검토한다
4. 관리자가 “승인”을 클릭한다
5. 시스템이 배달원 상태를 APPROVED로 변경한다
6. 시스템이 배달원에게 승인알림을 발송한다

**대안 흐름:**
- 4a. 서류가 미비한 경우

- 관리자가 “보류”을 선택하고 보류 사유를 입력한다
- 시스템이 배달원 신청 상태를 보류 상태로 변경한다
- 시스템이 보류 알림을 발송한다

-4b. 거절할 경우
- 관리자가 “거절”을 선택하고 거절 사유를 입력한다
- 시스템이 배달원 신청 상태를 REJECTED로 변경한다
- 시스템이 거절 알림을 발송한다

---

### UC-A03: 사용자 관리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-A03 |
| **유스케이스명** | 회원 관리 |
| **액터** | 관리자 |
| **개요** | 관리자가 회원 정보를 조회하고 상태를 관리한다 |
| **사전조건** | 관리자 권한으로 로그인 |
| **사후조건** | 회원 상태가 변경됨 |

**기본 흐름:**
1. 관리자가 회원 목록을 조회한다
2. 관리자가 검색/필터를 적용한다 (**고객명**, **연락처, 이메일**)
3. 관리자가 특정 회원을 선택한다
4. 관리자가 회원 상세 정보 및 신고 내역을 확인한다
5. 필요시 회원 상태를 변경한다 (활성화/비활성화 등)

**대안 흐름 (회원 정지):**
- 관리자가 “계정 정지”를 선택한다
- 정지 사유를 입력한다
- 시스템이 회원 상태를 SUSPENDED로 변경한다
- 해당 회원의 로그인이 차단된다

---

### UC-A04: 신고 처리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-A04 |
| **유스케이스명** | 신고 처리 |
| **액터** | 관리자 |
| **개요** | 관리자가 접수된 신고를 검토하고 처리한다 |
| **사전조건** | PENDING 상태의 신고가 있음 |
| **사후조건** | 신고가 처리됨 |

**기본 흐름:**
1. 관리자가 신고 목록을 조회한다
2. 관리자가 특정 신고를 선택한다
3. 관리자가 신고 내용을 검토한다
4. 관리자가 신고 대상의 정보를 확인한다
5. 관리자가 해당 신고에 대한 처리를 한다
6. 시스템이 신고 상태를 RESOLVED로 변경한다

1. 신고 완료에 대한 메시지 입력 해야한다.

7. 시스템이 신고자와 피신고자에게 결과 알림을 전송한다

**비즈니스 규칙:**
신고 종류: 리뷰 신고, 사용자 신고, 라이더 신고, 마트 신고 → 사용자 라이더 마트는 각각의 주문 내역에서 신고를 한다.

---

### UC-A05: 마트 정산 관리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-A05 |
| **유스케이스명** | 마트 정산 관리 |
| **액터** | 관리자, 시스템 |
| **개요** | 관리자가 마트 정산을 관리하고 실행한다 |
| **사전조건** | 정산 대상 주문이 존재함 |
| **사후조건** | 정산이 완료되고 입금됨 |

**기본 흐름:**
1. 시스템이 정산 주기에 따라 정산 데이터를 집계해서 정산을 생성한다

- (세금 계산서 발행 고려) - 추가 기능
2. 관리자가 정산 목록을 조회한다

3. 관리자는 다음 항목을 통해 정산 목록들을 필터링할 수 있다.

- 마트명

- 정산 상태

4. 관리자는 상세 조회 버튼을 통해 각 정산 별 상세 내역들을 조회한다.
5. 시스템이 정산 주기에 따라 정산 지급을 수행한다

6. 시스템이 정산 상태를 COMPLETED로 변경한다

**대안 흐름:**
- 5a. 정산 집계 실패 시
- 시스템이 관리자에게 정산 생성 실패 알림을 발송한다(이메일, sse)

-관리자가 수동으로 정산을 재실행한다.

- 5b. 정산 지급 실패 시
- 시스템이 관리자에게 정산 지급 실패 알림을 발송한다(이메일)

-관리자가 수동으로 정산 지급을 수행한다.

**비즈니스 규칙:**
마트 정산의 주기는 월이며 정산 생성 및 지급 시기는 20일에 하도록 한다(카드 취소 기간 고려)

정산에 실패할 경우 3번의 재실행을 실행한다.

정산을 생성할 경우 부분 정산 가능이 되도록 한다.

---

### UC-A06: 배달원 정산 관리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-A07 |
| **유스케이스명** | 배달원 정산 관리 |
| **액터** | 관리자, 시스템 |
| **개요** | 관리자가 배달원의 정산을 관리하고 실행한다. |
| **사전조건** | 정산 대상 배달이 존재함 |
| **사후조건** | 정산이 완료되고 입금됨 |

**기본 흐름:**
1. 시스템이 정산 주기에 따라 정산 데이터를 집계해서 정산을 생성한다
2. 관리자가 정산 목록을 조회한다

3. 관리자는 다음 항목을 통해 정산 목록들을 필터링할 수 있다.

- 배달원 이름

- 정산 상태

4. 관리자는 상세 조회 버튼을 통해 각 정산 별 상세 내역들을 조회한다.
5. 시스템이 정산 주기에 따라 정산 지급을 수행한다
6. 시스템이 정산 상태를 COMPLETED로 변경한다

**대안 흐름:**
- 5a. 정산 집계 실패 시
- 시스템이 관리자에게 정산 생성 실패 알림을 발송한다(이메일)

-관리자가 수동으로 정산을 재실행한다.

- 5b. 정산 지급 실패 시
- 시스템이 관리자에게 정산 지급 실패 알림을 발송한다(이메일)

-관리자가 수동으로 정산 지급을 수행한다.

**비즈니스 규칙:**

라이더정산은 월-일까지 내역을 차주 목요일에 정산 집계 및 지급한다.
 - 환불 기간은 배달 완료부터 48시간 이내

정산을 생성할 경우 부분 정산 가능이 되도록 한다.

---

### UC-A07: 통계 조회

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-A07 |
| **유스케이스명** | 통계 조회 |
| **액터** | 관리자 |
| **개요** | 관리자가 플랫폼 운영 통계를 조회한다 |
| **사전조건** | 관리자 권한으로 로그인 |
| **사후조건** | 없음 (조회만) |

**기본 흐름:**
1. 관리자가 통계 대시보드를 조회한다
2. 시스템이 주요 지표를 표시한다
- 주문 거래액 - 기간( 주간 / 월간 / 연간)

- 최근 신고 현황 - 통계로 변경 ( 총 건수, 해결 필요, 해결 완료)

- 총 회원수, 신규 가입자

- 승인 대기건 수
- 등록 마트수, 활성 배달원수

---

### UC-A08: 공지사항 관리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-A08 |
| **유스케이스명** | 공지사항 관리 |
| **액터** | 관리자 |
| **개요** | 관리자가 공지사항을 작성하고 관리한다 |
| **사전조건** | 관리자 권한으로 로그인 |
| **사후조건** | 공지사항이 게시됨 |

**기본 흐름:**
1. 관리자가 “컨텐츠 관리”를 선택한다
2. 관리자가 “공지 등록”를 클릭한다
3. 관리자가 공지 내용을 작성한다
- 제목, 내용
4. 관리자가 “게시”를 클릭한다

5. 관리자는 해당 게시물을 수정, 삭제할 수 있다.

---

### UC-A09: 마트 관리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-A09 |
| **유스케이스명** | 마트 관리 |
| **액터** | 관리자 |
| **개요** | 관리자가 마트를 관리한다 |
| **사전조건** | 관리자 권한으로 로그인 |
| **사후조건** | 마트의 상태를 변경 가능 |

**기본 흐름:**
1. 관리자가 “마트 관리”를 선택한다
2. 시스템이 마트에 대한 통계 자료와 목록을 표시한다.

3. 관리자는 마트의 이름이나 ~~지역~~으로 필터링 할 수 있다.
4. 관리자는 상세 정보를 통해 마트의 자세한 정보를 조회한다.
5. 관리자는 해당 마트의 상태 변경(활성화/비활성화)를 할 수 있다 - 사유 입력

**비즈니스 로직:**
마트가 비활성화되면 메인 화면에서 노출되지 않는다.

---

### UC-A10: 배달원 관리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-A09 |
| **유스케이스명** | 배달원 관리 |
| **액터** | 관리자 |
| **개요** | 관리자가 배달원를 관리한다 |
| **사전조건** | 관리자 권한으로 로그인 |
| **사후조건** | 배달원의 상태를 변경 가능 |

**기본 흐름:**
1. 관리자가 “배달원 관리”를 선택한다
2. 시스템이 배달원에 대한 통계 자료와 목록을 표시한다.

3. 관리자는 배달원의 이름으로 필터링 할 수 있다.- 번호 검색도 추가
4. 관리자는 상세 정보를 통해 배달원의 자세한 정보를 조회한다.

- 연락처나 정산 받을 계좌 추가
5. 관리자는 해당 배달원의 상태 변경(활성화/비활성화)를 할 수 있다. - 사유입력 추가하기

**비즈니스 규칙:**

배달원의 상태는 운행 중 / 운행 불가로 분류한다.

---

### UC-A11: FAQ(자주 묻는 질문) 관리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-A11 |
| **유스케이스명** | FAQ 관리 |
| **액터** | 관리자 |
| **개요** | 관리자가 FAQ를 작성하고 관리한다 |
| **사전조건** | 관리자 권한으로 로그인 |
| **사후조건** | FAQ가 게시됨 |

**기본 흐름:**
1. 관리자가 “컨텐츠 관리”를 선택한다
2. 관리자가 “FAQ 등록”을 클릭한다
3. 관리자가 FAQ 내용을 작성한다
4. 관리자가 “등록”을 클릭한다

5. 관리자는 해당 FAQ를 수정, 삭제할 수 있다.

---

### UC-A12: 알림 전송

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-A12 |
| **유스케이스명** | 알림 전송 |
| **액터** | 관리자 |
| **개요** | 관리자가 알림을 전송한다 |
| **사전조건** | 관리자 권한으로 로그인 |
| **사후조건** | 알림이 전송됨 |

**기본 흐름:**
1. 관리자가 “알림 발송”를 선택한다
2. 관리자는 발송될 알림의 내용을 정한다

- 발송 대상, 알림 제목, 알림 내용
3. 푸시 알림 발송하기 버튼을 통해 알림을 전송한다.
4. 관리자는 하단의 최근 발송 내역을 통해 알림의 내역을 조회한다.

---

### UC-A13: 1대1 문의

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-A13 |
| **유스케이스명** | 1대1문의 |
| **액터** | 관리자 |
| **개요** | 관리자가 1대1 문의를 처리한다 |
| **사전조건** | 관리자 권한으로 로그인 |
| **사후조건** | 1대1 문의를 답변한다. |

**기본 흐름:**
1. 관리자가 “1:1문의”를 선택한다
2. 1대1 고객문의 목록에서 답변 대기중인 문의에 답변하기를 선택한다.

3. 문의한 내용을 확인한 후 답변을 등록한다.
4. 답변이 등록한 이후 시스템은 문의자에게 sse알림을 전송한다.

**비즈니스 규칙:**

1대1문의의 상태는 답변 대기 / 답변 완료를 가진다

**수정할점:**

답변 완료 이후에도 답변하기 버튼이 동작 → 답변 후에는 상세보기, 답변 수정 금지

---

### UC-A14: 배너 관리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-A14 |
| **유스케이스명** | 배너 관리 |
| **액터** | 관리자 |
| **개요** | 관리자가 배너를 관리한다. |
| **사전조건** | 관리자 권한으로 로그인 |
| **사후조건** | 배너가 등록됨 |

**기본 흐름:**
1. 관리자가 “컨텐츠 관리”를 선택한다
2. 홈페이지 배너 관리 탭에서 배너 등록을 선택한다.

3. 새 배너 추가 버튼을 통해서 배너를 추가한다.

- 배너 이미지

- 배너 제목

- 배너 내용

~~- 기획전 번호~~

- 노출 상태

- 배경색
4. 관리자는 수정 / 삭제 버튼을 통해 배너를 관리할 수 있다.

논의할점:

배너는 홈페이지 전체 통일

---

### UC-R01: 배달원 등록 신청

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-R01 |
| **유스케이스명** | 배달원 등록 신청 |
| **액터** | 배달원 |
| **개요** | 신규 배달원이 플랫폼에 등록을 신청한다 |
| **사전조건** | 회원가입 완료 |
| **사후조건** | 배달원 등록 신청이 접수되고 승인 대기 |

**기본 흐름:**

1. 배달원이 “파트너 모집”화면에서 “주민 라이더 시작하기”을 클릭한다.
2. 시스템이 “주민 라이더 지원” 양식을 표시한다.
3. 배달원은 “주민 라이더 지원” 양식을 작성 후 “주민 라이더 가입하기” 버튼을 클릭한다.
- 이름
- 연락처
- 신분증 (주민등록증, 운전면허증)
- 예금주명, 은행명, 계좌번호
- 통장사본
: 주민 라이더 가입하기 → 주민 라이더 신청하기
4. 제출이 완료되고 배달원 심사 진행중 화면이 표시된다.
    - 시스템이 심사완료된 배달원에게 앱을 다운받을 수 있는 QR 코드를 제공한다.
5. 시스템이 관리자에게 승인 요청 알림을 발송한다.

비즈니스 규칙:

- 신청 취소는 승인 되기 전에 마이페이지 신청현황탭에서 가능 하다

**대안 흐름:**

1a. 이미 주민 라이더 신청을 완료한 경우 신청 취소하기 버튼이 출력된다.

---

### UC-R02: 운행 상태 관리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-R02 |
| **유스케이스명** | 운행 상태 관리 |
| **액터** | 배달원 |
| **개요** | 배달원이 운행 상태를 변경한다 |
| **사전조건** | 배달원이 승인된 상태 |
| **사후조건** | 배달원의 운행 상태가 변경됨 |
1. 배달원의 운행 상태가 “운행 불가”로 출력된다.
2. 배달원이 토글 스위치 버튼을 클릭해 운행 상태를 “운행 중”으로 변경한다.

**대안 흐름:**

1a. 운행을 종료하기 위해서 슬라이드 버튼을 클릭해 “운행 불가”로 변경한다.

**비즈니스 규칙:**
- 배달중인 주문이 있는 경우 운행 상태 변경 불가하다.
- 운행 불가 상태에서 운행 중으로 상태가 변경되면 라이더 위치를 조회한다.

---

### UC-R03: 배달 수락

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-R03 |
| **유스케이스명** | 배달 수락 |
| **액터** | 배달원 |
| **개요** | 배달원이 배달 요청을 수락한다 |
| **사전조건** | 배달 요청(REQUESTED) 상태의 배달 건이 있음
배달원이 운행 중인 상태 |
| **사후조건** | 배달이 배달원에게 배정됨 |

**기본 흐름:**

1. 시스템이 배달원에게 새 배달 요청 알림을 발송한다.
2. 배달원이 배달 상세 정보를 확인한다.
- 매장, 배송지
- 배달비, 예상 거리
: 용어 통일 필요, ~~픽업 위치, 마트,~~ 매장 / ~~배달 위치, 고객 위치,~~ 배송지
3. 배달원이 “배달 수락”을 클릭한다.
4. 시스템이 배달 상태를 ACCEPTED로 변경한다.
5. 시스템이 마트에게 배달원 배정 알림을 발송한다.

**대안 흐름:**

4a. 이미 동시 배달 3건을 수행 중인 경우

- 시스템이 수락 불가 메시지를 표시한다.

**비즈니스 규칙:**

- 배달원의 운행 상태가 “운행 중”인 경우에만 시스템은 배달원에게 새 배달 요청 알림을 발송한다.

- BR-D01: 배달원은 동시에 최대 3건의 배달만 수행 가능하다.

---

### UC-R04: 픽업 완료 처리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-R04 |
| **유스케이스명** | 픽업 완료 처리 |
| **액터** | 배달원 |
| **개요** | 배달원이 마트에서 상품을 픽업하고 완료 처리한다 |
| **사전조건** | 배달이 ACCEPTED 상태이고, 마트에서 상품 준비 완료된 상태 |
| **사후조건** | 배달 상태가 PICKED_UP으로 변경됨 |

**기본 흐름:**

1. 배달원이 마트에 도착한다.
2. 배달원이 마트에서 상품을 수령한다.
3. 배달원이 “픽업 완료”를 클릭한다.
4. 시스템이 배달 상태를 PICKED_UP으로 변경한다.
5. 시스템이 주문 상태를 PICKED_UP으로 변경한다.
6. “픽업 완료”버튼이 “배송 시작”버튼으로 변경된다.

---

### UC-R05: 배송 시작 처리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-R05 |
| **유스케이스명** | 배송 시작 처리 |
| **액터** | 배달원 |
| **개요** | 배달원이 고객에게 상품 전달을 시작한다 |
| **사전조건** | 배달이 PICKED_UP 상태 |
| **사후조건** | 배달이 완료됨 |
1. 배달원이 “배송 시작”버튼을 클릭한다.
2. 시스템이 배달 상태를 DELIVERING으로 변경한다.
3. 시스템이 주문 상태를 DELIVERING으로 변경한다.

---

### UC-R06: 실시간 위치 전송

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-R06 |
| **유스케이스명** | 실시간 위치 전송 |
| **액터** | 배달원, 시스템 |
| **개요** | 배달 중 배달원의 위치를 실시간으로 시스템에 전송한다 |
| **사전조건** | 배달이 진행 중(PICKING_UP ~ DELIVERING) |
| **사후조건** | 위치 정보가 저장되고 고객에게 공유됨 |

**기본 흐름:**

1. 배달원이 배달을 시작한다.
2. 시스템이 GPS 위치 추적을 시작한다.
3. 앱이 3-5초마다 위치 정보를 서버로 전송한다.
4. 서버가 위치 정보를 Redis에 저장한다.
5. 서버가 WebSocket으로 고객에게 위치를 브로드캐스트한다.
6. 배달 완료 시 위치 추적이 중단된다.

**비즈니스 규칙:**
- 위치 추적은 배송 시작과 동시에 시작된다
- BR-D03: 배달 중 위치 정보는 3~5초 간격으로 수집한다.
- BR-D05: 위치 이력 데이터는 14일 후 자동 삭제한다.

---

### UC-R07: 배송 완료 처리

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-R07 |
| **유스케이스명** | 배송 완료 처리 |
| **액터** | 배달원 |
| **개요** | 배달원이 고객에게 상품을 전달하고 배송을 완료한다 |
| **사전조건** | 배달이 DELIVERING 상태 |
| **사후조건** | 배달이 완료되고 정산 대상에 포함됨 |

**기본 흐름:**

1. 배달원이 고객 배송지에 도착한다.
2. 배달원이 배송 완료 사진을 촬영한다.
3. 배달원이 상품을 고객에게 전달한다.
4. 배달원이 “배송 완료”를 클릭한다.
5. 시스템이 배달 상태를 DELIVERED로 변경한다
6. 시스템이 주문 상태를 DELIVERED로 변경한다
7. 시스템이 실시간 위치 추적을 중단한다.
8. 시스템이 고객에게 “배송이 완료되었습니다” 알림을 발송한다.
9. 배달원은 배달 완료 메시지와 함께 적립된 수익을 알림으로 확인한다.
10. 시스템이 배달원의 정산에 배달 수익을 추가한다.

**비즈니스 규칙:**

- BR-D04: 배송 완료 후 실시간 위치 추적 즉시 중단한다.

- 배송 완료 버튼은 배송 완료 사진 등록 후 활성화 처리된다.

- 사진이 등록된 후로부터 24시간이 지난 사진은 삭제된다.

---

### UC-R08: 운행 내역 조회

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-R08 |
| **유스케이스명** | 운행 내역 조회 |
| **액터** | 배달원 |
| **개요** | 배달원이 운행 내역을 조회한다 |
| **사전조건** | 배달원이 승인된 상태 |
| **사후조건** | 없음 (조회만) |
1. 배달원이 “히스토리”를 클릭한다.
2. 시스템이 운행 내역을 표시한다.
3. 조회 기간(오늘, 1주일, 한달)을 선택한다.
4. 시스템은 조회 기간별 총 수익과 운행 내역을 표시한다.
5. 배달원은 운행 내역을 상세조회할 수 있다.

 - 배달 날짜

 - 배달 상태(배달완료, 취소됨)

 - 매장 위치→배송지 위치

 - 배달 상세 내역(주문번호, 품목, 고객정보)

 - 수익 금액

 - 영수증

---

### UC-R09: 정산 확인

| 항목 | 내용 |
| --- | --- |
| **유스케이스 ID** | UC-R09 |
| **유스케이스명** | 정산 확인 |
| **액터** | 배달원 |
| **개요** | 배달원이 정산 내역을 확인한다 |
| **사전조건** | 정산 내역이 존재함 |
| **사후조건** | 없음 (조회만) |

**기본 흐름:**

1. 배달원이 “정산”을 클릭한다.
2. 시스템이 주 단위 정산 예정 금액과 최근 정산 기록을 표시한다.
3. 배달원이 특정 정산 기록을 선택한다.
4. 시스템이 상세 내역을 표시한다.

- 해당 기간 배달 건수

**비즈니스 규칙:**

- BR-P04: 배달원 정산은 주 단위이다.